import { MetaEffect, Effect } from "./effect"
import { damage } from "../actions/damage"
import { Listener, ConsumerArgs } from "../actions/listener"
import { vulnerability } from "./vulnerability"

export const invulnerability = Symbol('vulnerability')
export const Invulnerability: Class<Effect> = MetaEffect(invulnerability, null, {
    stacked: false, 
    delta: x => x,
    min: 1,
    max: 1,
}, owner => new Listener(
    invulnerability,
    {
        subjects: [owner],
        type: damage,
    },
    function({ cancel }: ConsumerArgs<>): void {
        cancel()
    },  
    false,
), [vulnerability], [damage])