import { defineEffect, Effect } from "./effect"
import { damage } from '../events/damage'
import { Listener, ConsumerArgs } from '../events/listener'
import { vulnerability } from "./vulnerability"

export const invulnerability = Symbol('invulnerability')
export const Invulnerability = defineEffect(invulnerability, null, {
    stacked: false, 
    delta: x => x,
    min: 1,
    max: 1,
}, owner => new Listener(
    invulnerability,
    {
        subjects: [owner],
        type: damage,
    },
    function*({ cancel }){
        cancel()
    },  
    false,
), [vulnerability], [damage])